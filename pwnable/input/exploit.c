#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>

int main(int args, char* argv[], char* envp[]) {
  *envp = "\xde\xad\xbe\xef\x3d\xca\xfe\xba\xbe";
  int fd = open("pip", O_RDWR | O_CREAT, S_IRUSR | S_IWUSR);
  char *newargv[] = {"/bin/bash", "-c", "'./exploit.sh'", 0};
  dup2(fd, 1);
  dup2(fd, 2);
  close(fd);
  execve("/bin/bash", &newargv[0], envp);
}
