#!/bin/bash

# stage 5
(sleep 1.5; (echo -e "\xde\xad\xbe\xef" | nc localhost 9999)) &

# stage 4
echo -en "\x00\x00\x00\x00" >$'\n'

# stage 2
exec 2>&-; echo -e "\x00\x0a\x02\xff" >stderr; exec 2<stderr

# stage 1
echo -en "\x00\x0a\x00\xff" | ./input  $(seq 1 64) '' "$(echo -ne " \n\r")" '9999' $(seq 68 99)

rm -f -- $'\n' stderr

